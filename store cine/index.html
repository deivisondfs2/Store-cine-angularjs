<!DOCTYPE html>
<html ng-app="store">
<head>
	<meta charset="UTF-8">
 	<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.mim.css">
    <link rel="stylesheet" type="text/css" href="css/styleapp.css">

	<title>AngularJs movie house</title>
</head>
<body>

    <!-- Navigation -->
    <navbar-directive>
    </navbar-directive>
    
	<div class="container">

		<div class="row">
            <div class="col-md-3">                
                <category-cine></category-cine>
            </div>
        
        	<div class="col-md-9" ng-controller="ListMovies as movies">
        		<div class="row">
        			<div ng-repeat="movie in movies.product" class="col-sm-5 col-lg-5 col-md-5">
                        <div class="thumbnail">
                            <img ng-src="{{movie.images[0].full}}" alt="{{movie.name}}">
                            <div class="caption">
                                <h4 class="pull-right">{{movie.price | currency}}</h4>
                                <h4><a href="#">{{movie.name | uppercase | limitTo:20}}</a></h4>
                                <p>{{movie.description.resume}} <a ng-show="{{movie.haveLink}}" target="_blank" href="{{movie.link}}">{{movie.link}}</a></p>
                            </div>
                            <button ng-show="{{movie.addCart}}" type="button" class="btn btn-sm btn-success">Add Cart</button>
                            <div class="ratings" ng-controller="PainelTabsController as painelTab">
                                <p class="pull-right"></p>
                                <p calss="pull-right">
                                    <span class="pull-right glyphicon glyphicon-star"></span>
                                    <span class="pull-right glyphicon glyphicon-star"></span>
                                    <span class="pull-right glyphicon glyphicon-star"></span>
                                    <span class="pull-right glyphicon glyphicon-star"></span>
                                    <span class="pull-right glyphicon glyphicon-star-empty"></span>
                                </p>
                                <ul class="nav nav-pills">
                                    <li role="presentation" ng-class="{active: painelTab.isTabSelected(1)}">
                                        <a href="javascript:;" ng-click="painelTab.setTab(1)">Descriptions</a>
                                    </li>
                                    <li role="presentation" ng-class="{active: painelTab.isTabSelected(2)}">
                                        <a href="javascript:;" ng-click="painelTab.setTab(2)">{{movie.reviews.length}} reviews</a>
                                    </li>
                                </ul>
                                <div class="painel" ng-show="painelTab.isTabSelected(1)">
                                    <h4>Description</h4>
                                    <p>{{movie.description.descFull}}</p>
                                </div>
                                <div class="painel" ng-show="painelTab.isTabSelected(2)">
                                    

                                    <ul class="list-group" >
                                        <h4>Reviews</h4>
                                        <blockquote>
                                            <li class="list-group-item" ng-repeat="review in movie.reviews">
                                                                                            
                                                <span ng-repeat="star in movies.getArrayNumber(review.star) ">
                                                    <span class="glyphicon glyphicon-star"></span>
                                                </span>                                                               

                                                <h4 class="list-group-item-heading">{{review.description}}</h4>
                                                <cite>{{review.author}}</cite>
                                            </li>  

                                        </blockquote>                                  
                                    </ul>
                                    <button class="btn btn-sm" ng-click="showForm = true">Add Review</button>
                                    <form name="formReview" ng-controller="reviewsController as reviewsCtrl" ng-submit="formReview.$valid && reviewsCtrl.addReviewMovie(movie)" ng-show="showForm" novalidate>
                                        <!-- preview -->
                                        <blockquote>
                                            <span ng-repeat="star in movies.getArrayNumber(reviewsCtrl.reviewForm.star) ">
                                                <span class="glyphicon glyphicon-star"></span>
                                            </span> 
                                            <h4 class="list-group-item-heading">{{reviewsCtrl.reviewForm.description}}</h4>
                                            <cite>{{reviewsCtrl.reviewForm.author}}</cite>
                                        </blockquote>
                                        <!--  Review Form -->
                                          <h4>Submit a Review</h4>
                                          <fieldset class="form-group">
                                            <select ng-model="reviewsCtrl.reviewForm.star" class="form-control" ng-options="stars for stars in [5,4,3,2,1]"  title="Stars" required>
                                              <option value="">Rate the Movie</option>
                                            </select>
                                          </fieldset>
                                          <fieldset class="form-group">
                                            <textarea ng-model="reviewsCtrl.reviewForm.description" class="form-control" placeholder="Write a short review of the movie..." title="Review" required></textarea>
                                          </fieldset>
                                          <fieldset class="form-group">
                                            <input ng-model="reviewsCtrl.reviewForm.author" type="email" class="form-control" placeholder="deivisondfs@gmail.com" title="Email" required />
                                          </fieldset>
                                          <div>This form is {{formReview.$valid}}</div>
                                          <fieldset class="form-group">
                                            <input type="submit" class="btn btn-primary pull-right" value="Submit Review" />
                                          </fieldset>
                                    </form>
                                </div>                                
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
		</div>
	</div>
</body>
</html>
<script src="js/angular.min.js"></script>
<script src="js/app/stock.js"></script>
<script src="js/app/app.js"></script>